-- CREATE TABLE FROM DATABASE --
CREATE TABLE Production(
	PROD_NUM VARCHAR(255) PRIMARY KEY,
	PROD_LABEL VARCHAR(255),
	PROD_PRICE DECIMAL(10,2)
);

CREATE TABLE Invoice(
	INV_NUM INT IDENTITY(1,1) PRIMARY KEY,
	SALE_DATE DATE
);

CREATE TABLE Vendor(
	VEND_CODE INT PRIMARY KEY,
	VEND_NAME VARCHAR(255)
);

CREATE TABLE Orders(
	INV_NUM INT,
	VEND_CODE INT,
	PROD_NUM VARCHAR(255),
	QUANT_SOLD INT,
	PRIMARY KEY(INV_NUM, VEND_CODE, PROD_NUM),
	FOREIGN KEY(INV_NUM) REFERENCES Invoice(INV_NUM) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY(VEND_CODE) REFERENCES Vendor(VEND_CODE) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY(PROD_NUM) REFERENCES Production(PROD_NUM) ON DELETE CASCADE ON UPDATE CASCADE
);

-- LOAD DATA INTO DATABASE --
use [Machinery,inc];

SET IDENTITY_INSERT dbo.Invoice ON;
INSERT INTO Invoice(	INV_NUM,	SALE_DATE)VALUES	(211347, '2018-01-15'),	(211348, '2018-01-15'),	(211349, '2018-01-16')

INSERT INTO Production(	PROD_NUM,	PROD_LABEL,	PROD_PRICE)VALUES	('AA-E3422QW',	'Rotary Sander',	49.95),	('QD-300932X',	'0.25-in. drill bit',	3.45),	('RU-995748G',	'Band saw',	39.99),	('GH-778345P',	'Power Drill',	87.75)

INSERT INTO Vendor(
	VEND_CODE,
	VEND_NAME
)
VALUES
(211, 'NeverFail,Inc.'),
(309, 'BeGood,Inc.'),
(157, 'ToughGo,Inc.')

INSERT INTO Orders(	INV_NUM, 	PROD_NUM,	VEND_CODE,	QUANT_SOLD)VALUES(211347, 'AA-E3422QW', 211, 1),(211347, 'QD-300932X', 211, 8),(211347, 'RU-995748G', 309, 1),(211348, 'AA-E3422QW', 211, 2),(211349, 'GH-778345P', 157, 1)
SET IDENTITY_INSERT dbo.Invoice OFF;